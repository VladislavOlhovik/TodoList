(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{115:function(t,e,a){},116:function(t,e,a){"use strict";a.r(e);var n,r,c=a(0),i=a.n(c),o=a(9),s=a.n(o),l=a(19),u=(a(95),a(155)),d=a(156),f=a(150),b=a(158),p=a(153),O=a(159),m=a(160),T=a(157),k=a(154),v=a(117),E=a(35),j=a(161),h=a(151),g=i.a.memo((function(t){console.log("AddItemForm");var e=Object(c.useState)(""),a=Object(E.a)(e,2),n=a[0],r=a[1],o=Object(c.useState)(null),s=Object(E.a)(o,2),l=s[0],u=s[1],d=function(){""!==n.trim()?(t.addItem(n),r("")):u("Title is required")};return i.a.createElement("div",null,i.a.createElement(j.a,{disabled:t.disabled,variant:"outlined",value:n,onChange:function(t){r(t.currentTarget.value)},onKeyPress:function(t){13===t.charCode&&d(),l&&u(null)},label:"Title",helperText:l,error:!!l}),i.a.createElement(f.a,{color:"primary",onClick:d,disabled:t.disabled},i.a.createElement(h.a,{fontSize:"large"})))})),S=a(14),y=a.n(S),I=a(20),C=a(48),A=a(21),w=a(7),x=a(71),D=a.n(x).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"9209cc73-1dd6-4bef-bbf6-e01b3e14b107"}}),L=function(){return D.get("todo-lists")},N=function(t){return D.post("todo-lists",{title:t})},R=function(t){return D.delete("todo-lists/".concat(t))},P=function(t,e){return D.put("todo-lists/".concat(t),{title:e})},F=function(t){return D.get("/todo-lists/".concat(t,"/tasks"))},H=function(t,e){return D.post("/todo-lists/".concat(t,"/tasks"),{title:e})},K=function(t,e,a){return D.put("/todo-lists/".concat(t,"/tasks/").concat(e),a)},U=function(t,e){return D.delete("/todo-lists/".concat(t,"/tasks/").concat(e))};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgenty=3]="Urgenty",t[t.Later=4]="Later"}(r||(r={}));var M={status:"idle",error:null},G=function(t){return{type:"APP/SET-STATUS",status:t}},_=function(t){return{type:"APP/SET-ERROR",error:t}},z=function(t,e){t.messages.length?e(_(t.messages[0])):e(_("Some ERROR")),e(G("failed"))},V=function(t,e){e(G("failed")),e(_(t.message))},Y=function(t,e){return{type:"REMOVE-TASK",todolistId:e,taskId:t}},B=function(t,e,a){return{type:"UPDATE_TASK",updateModel:e,todolistId:a,taskId:t}},J=function(t,e){return{type:"SET_TASKS",tasks:t,todolistId:e}},W=function(t,e,a){return{type:"CHANGE-TASK-ENTITY-STATUS",entityStatus:t,taskId:e,todolistId:a}},q=function(t,e,a){return function(){var n=Object(I.a)(y.a.mark((function n(r,c){var i,o,s;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r(G("loading")),r(W("loading",t,a)),!(i=c().tasks1[a].find((function(e){return e.id===t})))){n.next=16;break}return o=Object(w.a)({title:i.title,description:i.description,status:i.status,priority:i.priority,startDate:i.startDate,deadline:i.deadline},e),n.prev=5,n.next=8,K(a,t,o);case 8:0===(s=n.sent).data.resultCode?(r(B(t,e,a)),r(G("succeeded")),r(W("succeeded",t,a))):(z(s.data,r),r(W("failed",t,a))),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(5),V(n.t0,r),r(W("failed",t,a));case 16:case"end":return n.stop()}}),n,null,[[5,12]])})));return function(t,e){return n.apply(this,arguments)}}()},$=a(152),Q=i.a.memo((function(t){console.log("EditableSpan");var e=Object(c.useState)(!1),a=Object(E.a)(e,2),n=a[0],r=a[1],o=Object(c.useState)(""),s=Object(E.a)(o,2),l=s[0],u=s[1];return n?i.a.createElement(j.a,{value:l,onChange:function(t){u(t.currentTarget.value)},onBlur:function(){r(!1),t.onChange(l)},autoFocus:!0}):i.a.createElement("span",{onDoubleClick:function(){t.disabled&&(r(!0),u(t.title))},title:"to change it use a double click",className:t.isDone?"is-done":""},t.title)})),X=a(163),Z=i.a.memo((function(t){var e=Object(c.useCallback)((function(){return t.removeTask(t.task.id,t.id)}),[t.removeTask,t.task.id,t.id]),a=Object(c.useCallback)((function(e){t.changeTaskStatus(t.task.id,e.currentTarget.checked?n.Completed:n.New,t.id)}),[t.changeTaskStatus,t.task.id,t.id]),r=Object(c.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.id)}),[t.changeTaskTitle,t.task.id,t.id]);return i.a.createElement("div",{key:t.task.id,style:{fontSize:"19px"}},i.a.createElement(X.a,{color:"primary",checked:t.task.status===n.Completed,onChange:a}),i.a.createElement(Q,{disabled:"loading"!==t.task.entityStatus,onChange:r,title:t.task.title,isDone:t.task.status===n.Completed}),i.a.createElement(f.a,{onClick:e,disabled:"loading"===t.task.entityStatus},i.a.createElement($.a,null)))})),tt=i.a.memo((function(t){var e=Object(l.b)();Object(c.useEffect)((function(){var a;e((a=t.todolist.id,function(){var t=Object(I.a)(y.a.mark((function t(e){var n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(G("loading")),t.prev=1,t.next=4,F(a);case 4:n=t.sent,r=n.data.items.reverse(),e(J(r,a)),e(G("succeeded")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),V(t.t0,e);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()))}),[]),console.log("TodoList");var a=t.tasks;"active"===t.todolist.filter&&(a=t.tasks.filter((function(t){return t.status===n.New}))),"completed"===t.todolist.filter&&(a=t.tasks.filter((function(t){return t.status===n.Completed})));var r=Object(c.useCallback)((function(){return t.changeFilter("all",t.todolist.id)}),[t.todolist.id,t.changeFilter]),o=Object(c.useCallback)((function(){return t.changeFilter("active",t.todolist.id)}),[t.todolist.id,t.changeFilter]),s=Object(c.useCallback)((function(){return t.changeFilter("completed",t.todolist.id)}),[t.todolist.id,t.changeFilter]),u=Object(c.useCallback)((function(){return t.removeTodolist(t.todolist.id)}),[t.todolist.id,t.removeTodolist]),d=Object(c.useCallback)((function(e){return t.addTasks(e,t.todolist.id)}),[t.addTasks,t.todolist.id]),b=Object(c.useCallback)((function(e){return t.changeTodoListTitle(e,t.todolist.id)}),[t.changeTodoListTitle,t.todolist.id]);return i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement(Q,{title:t.todolist.title,onChange:b,disabled:"loading"!==t.todolist.entityStatus}),i.a.createElement(f.a,{onClick:u,disabled:"loading"===t.todolist.entityStatus},i.a.createElement($.a,null))),i.a.createElement(g,{addItem:d,disabled:"loading"===t.todolist.entityStatus}),i.a.createElement("div",null,a.map((function(e){return i.a.createElement(Z,{changeTaskStatus:t.changeTaskStatus,changeTaskTitle:t.changeTaskTitle,removeTask:t.removeTask,task:e,id:t.todolist.id,key:e.id})}))),i.a.createElement("div",null,i.a.createElement(p.a,{size:"small",variant:"all"===t.todolist.filter?"contained":"text",onClick:r,color:"default"},"All"),i.a.createElement(p.a,{style:{margin:"0 5px"},size:"small",variant:"active"===t.todolist.filter?"contained":"text",onClick:o,color:"primary"},"Active"),i.a.createElement(p.a,{size:"small",variant:"completed"===t.todolist.filter?"contained":"text",onClick:s,color:"secondary"},"Completed")))})),et=function(t){return{type:"REMOVE-TODOLIST",todolistId:t}},at=function(t,e){return{type:"CHANGE-TODOLIST-TITLE",todolistId:t,title:e}},nt=function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",entityStatus:t,todolistId:e}},rt=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t})),a=e.todoLists,n=e.tasks1;Object(c.useEffect)((function(){t(function(){var t=Object(I.a)(y.a.mark((function t(e){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(G("loading")),t.prev=1,t.next=4,L();case 4:a=t.sent,e({type:"SET_TODOLISTS",todolists:a.data}),e(G("succeeded")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),V(t.t0,e);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())}),[]);var r=Object(c.useCallback)((function(e,a){t(function(t,e){return function(){var a=Object(I.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(G("loading")),a.prev=1,a.next=4,H(e,t);case 4:0===(r=a.sent).data.resultCode?(n({type:"ADD-TASK",task:r.data.data.item}),n(G("succeeded"))):z(r.data,n),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),V(a.t0,n);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(t){return a.apply(this,arguments)}}()}(e,a)),u("all",a)}),[t]),o=Object(c.useCallback)((function(e,a){t(function(t,e){return function(){var a=Object(I.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(G("loading")),n(W("loading",t,e)),a.prev=2,a.next=5,U(e,t);case 5:0===(r=a.sent).data.resultCode?(n(Y(t,e)),n(G("succeeded"))):z(r.data,n),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),V(a.t0,n);case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(t){return a.apply(this,arguments)}}()}(e,a))}),[t]),s=Object(c.useCallback)((function(e,a,n){t(q(e,{status:a},n))}),[t]),u=Object(c.useCallback)((function(e,a){t(function(t,e){return{type:"CHANGE-TODOLIST-FILTER",todolistId:t,filter:e}}(a,e))}),[t]),d=Object(c.useCallback)((function(e){t(function(t){return function(){var e=Object(I.a)(y.a.mark((function e(a){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(G("loading")),a(nt("loading",t)),e.prev=2,e.next=5,R(t);case 5:0===(n=e.sent).data.resultCode?(a(et(t)),a(G("succeeded"))):z(n.data,a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),V(e.t0,a);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}(e))}),[t]),f=Object(c.useCallback)((function(e){t(function(t){return function(){var e=Object(I.a)(y.a.mark((function e(a){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(G("loading")),e.prev=1,e.next=4,N(t);case 4:0===(n=e.sent).data.resultCode?(a({type:"ADD-TODOLIST",todolist:n.data.data.item}),a(G("succeeded"))):z(n.data,a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),V(e.t0,a);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}(e))}),[t]),b=Object(c.useCallback)((function(e,a,n){t(q(e,{title:a},n))}),[t]),p=Object(c.useCallback)((function(e,a){var n,r;t((n=a,r=e,function(){var t=Object(I.a)(y.a.mark((function t(e){var a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(G("loading")),t.prev=1,t.next=4,P(n,r);case 4:0===(a=t.sent).data.resultCode?(e(at(n,r)),e(G("succeeded"))):z(a.data,e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),V(t.t0,e);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()))}),[t]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{container:!0,style:{padding:"20px"}},i.a.createElement(g,{addItem:f})),i.a.createElement(k.a,{container:!0,spacing:3},a.map((function(t){var e=n[t.id];return i.a.createElement(k.a,{item:!0,key:t.id},i.a.createElement(v.a,{elevation:8,style:{padding:"10px"}},i.a.createElement(tt,{todolist:t,tasks:e,removeTask:o,changeFilter:u,addTasks:r,changeTaskStatus:s,removeTodolist:d,changeTaskTitle:b,changeTodoListTitle:p})))}))))},ct=a(165),it=a(162);function ot(t){return i.a.createElement(it.a,Object.assign({elevation:6,variant:"filled"},t))}function st(){var t=Object(l.c)((function(t){return t.app.error})),e=Object(l.b)(),a=function(t,a){"clickaway"!==a&&e(_(null))};return i.a.createElement(ct.a,{open:!!t,autoHideDuration:3e3,onClose:a},i.a.createElement(ot,{onClose:a,severity:"error"},t||"Some error"))}var lt=function(){var t=Object(l.c)((function(t){return t.app.status}));return i.a.createElement("div",{className:"App"},i.a.createElement(st,null),i.a.createElement(u.a,{position:"static"},i.a.createElement(d.a,null,i.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"menu"},i.a.createElement(T.a,null)),i.a.createElement(b.a,{variant:"h6"},"News"),i.a.createElement(p.a,{color:"inherit"},"Login")),i.a.createElement("div",{style:{height:"4px"}},"loading"===t&&i.a.createElement(O.a,null))),i.a.createElement(m.a,{fixed:!0},i.a.createElement(rt,null)))};a(115),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ut=a(32),dt=a(72),ft=Object(ut.c)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todolistId}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.todolistId?Object(w.a)(Object(w.a)({},t),{},{entityStatus:e.entityStatus}):t}));case"ADD-TODOLIST":return[Object(w.a)(Object(w.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(C.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todolistId?Object(w.a)(Object(w.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todolistId?Object(w.a)(Object(w.a)({},t),{},{filter:e.filter}):t}));case"SET_TODOLISTS":return e.todolists.map((function(t){return Object(w.a)(Object(w.a)({},t),{},{filter:"all",entityStatus:"idle"})}));default:return t}},tasks1:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(w.a)(Object(w.a)({},t),{},Object(A.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(w.a)(Object(w.a)({},t),{},Object(A.a)({},e.task.todoListId,[].concat(Object(C.a)(t[e.task.todoListId]),[Object(w.a)(Object(w.a)({},e.task),{},{entityStatus:"idle"})])));case"UPDATE_TASK":return Object(w.a)(Object(w.a)({},t),{},Object(A.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(w.a)(Object(w.a)({},t),e.updateModel):t}))));case"ADD-TODOLIST":return Object(w.a)(Object(w.a)({},t),{},Object(A.a)({},e.todolist.id,[]));case"CHANGE-TASK-ENTITY-STATUS":return Object(w.a)(Object(w.a)({},t),{},Object(A.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(w.a)(Object(w.a)({},t),{},{entityStatus:e.entityStatus}):t}))));case"SET_TODOLISTS":var a=Object(w.a)({},t);return e.todolists.forEach((function(t){a[t.id]=[]})),a;case"SET_TASKS":return Object(w.a)(Object(w.a)({},t),{},Object(A.a)({},e.todolistId,e.tasks.map((function(t){return Object(w.a)(Object(w.a)({},t),{},{entityStatus:"idle"})}))));case"REMOVE-TODOLIST":var n=Object(w.a)({},t);return delete n[e.todolistId],n;default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(w.a)(Object(w.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(w.a)(Object(w.a)({},t),{},{error:e.error});default:return t}}}),bt=Object(ut.d)(ft,Object(ut.a)(dt.a));s.a.render(i.a.createElement(l.a,{store:bt},i.a.createElement(lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},83:function(t,e,a){t.exports=a(116)},95:function(t,e,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.0803de8d.chunk.js.map